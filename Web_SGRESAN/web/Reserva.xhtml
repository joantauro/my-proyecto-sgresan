<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./vista/Plantilla_main.xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <ui:define name="top">
       
    </ui:define>

    <ui:define name="left">
 
    </ui:define>

    <ui:define name="content">
        
        
        <h:form id="form" >
          <p:wizard widgetVar="wiz"   
                    flowListener="#{UserWizard.onFlowProcess}" backLabel="Atrás" nextLabel="Siguiente"  >
                    <p:tab id="clientetab" title="Cliente">
                        <p:panel header="Datos del Cliente" style="width: 500px" >
                              <h:panelGrid   columns="2"   id="panel2" >
                       <h:outputText value="Nombre" />
                       <p:inputText value="#{loginBean.persona.nombres}" />
                       <h:outputText value="Apellidos" />
                       <p:inputText  value="#{loginBean.persona.apellidoP}" />
                       <h:outputText value="Correo" />
                       <p:inputText  value="#{loginBean.persona.email}" />
                       <h:outputText value="Celular" />
                       <p:inputText  value="#{loginBean.persona.celular}" />
                       <h:outputText value="DNI" />
                       <p:inputText  value="#{loginBean.persona.dni}" />
                   </h:panelGrid>
                              
                        </p:panel>
                    </p:tab>
                    
                    <p:tab id="fechatab" title="Fecha">              
                            <p:panelGrid   columns="2" style="margin-right:  auto" id="detailsBookingInner" >
                                <h:outputText value="Fecha de Entrada" />
                                <p:calendar mindate="#{habitacionBean.max}" value="#{reservaDetalleBean.reserv.fechaEntrada}" pattern="dd/MM/yyyy" >
                                    <p:ajax event="dateSelect" listener="#{reservaDetalleBean.CAMBIO()}" update="fechSa" />
                                </p:calendar>
                                <h:outputText value="Fecha de Salida" />
                                <p:calendar id="fechSa" mindate="#{reservaDetalleBean.reserv.fechaEntrada}" value="#{reservaDetalleBean.reserv.fechaSalida}" pattern="dd/MM/yyyy" />        
                            </p:panelGrid>
                        <p:commandButton update="pickList" value="Comprobar Disponibilidad" action="#{reservaDetalleBean.BUSQUEDA2(reservaDetalleBean.reserv.fechaEntrada, reservaDetalleBean.reserv.fechaSalida)}" />
                    </p:tab>
                    
                    <p:tab id="dormitoriotab" title="Dormitorios">
                        <p:growl id="msg" showDetail="true" escape="false" />
                        <p:pickList id="pickList" value="#{reservaDetalleBean.cities}" var="cities" 
                                    itemLabel="#{cities}" itemValue="#{cities}" converter="entityConverter" >
                            <f:facet name="sourceCaption">Disponibles</f:facet>
                            <f:facet name="targetCaption">Seleccionados</f:facet>

                            <p:ajax event="transfer" listener="#{reservaDetalleBean.onTransfer}" update="msg,costo" />

                            <p:column style="width:25%;">
                                <h:outputText value="#{cities.nroHabitacion}" />
                            </p:column>
                            <p:column style="width:75%;">
                                <h:outputText value="#{cities.TTipohabitacion.nombre}" />
                            </p:column>
                        </p:pickList>
                        <h:panelGrid   columns="2" style="margin-right:  auto;background: none;" cellpadding="4"  >
                            <h:outputText value="Precio : " style="background: none;font-family: cursive; " />
                            <h:outputText value="#{reservaDetalleBean.costo}" id="costo" style="background: none;font-family: cursive;"  /> 
                          
                        </h:panelGrid>
                        
                        <p:commandButton update="dia" value="Registrar" action="#{reservaDetalleBean.registrarprereserva()}" style="margin-left: 60% " onclick="PF('dlg2').show();"  /> 
                        <p:commandButton value="Cancelar"  style="margin-left: 5%" />
                    </p:tab>
                
                </p:wizard>
            
            <p:dialog  header="Modal Dialog" widgetVar="dlg2" modal="true" height="100">
                <h:panelGrid   id="dia" columns="1" style="margin-right:  auto;background: none;" cellpadding="4"  >
                    <h:outputText value="Su Código de Reserva es el siguiente: #{reservaDetalleBean.reserv.idReserva}" />
                <p:commandButton value="Aceptar" action="index.xhtml" />
                </h:panelGrid>
                
            </p:dialog> 
        </h:form>
    </ui:define>

    <ui:define name="bottom">
        bottom
    </ui:define>

</ui:composition>
